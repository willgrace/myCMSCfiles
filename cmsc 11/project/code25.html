<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<title>C sample code - Using pipes as file streams, fdopen() - Source code examples</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="Author" content="HappyCodings">
<meta name="Robots" content="index, follow">
<meta name="Description" content="Using pipes as file streams, fdopen() sample code source code examples">
<meta name="Classification" content="Computer Programming">
<meta name="Rating" content="All">
<meta name="Keywords" content="c code, c program code, c code example, c language code, sample c code, programming c,
c code library, c game code, c example, c using, c programs, c implementation, c algorithm, c data structures">
<link rel="stylesheet" type="text/css" href="code25_files/style.css">
</head><body>

<div class="container">

<a href="http://www.happycodings.com/">
<img src="code25_files/happy.gif" alt="Happy Codings" border="0"></a>

<br><br><nobr>
<a href="http://www.asp.happycodings.com/index.html">
<img src="code25_files/2.gif" alt="Asp Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.aspnet.happycodings.com/index.html">
<img src="code25_files/3.gif" alt="Asp.Net Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.assembly.happycodings.com/index.html">
<img src="code25_files/4.gif" alt="Assembly Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.c.happycodings.com/index.html">
<img src="code25_files/5.gif" alt="C Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.cplusplus.happycodings.com/index.html">
<img src="code25_files/7.gif" alt="C++ Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.java.happycodings.com/index.html">
<img src="code25_files/8.gif" alt="Java Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.php.happycodings.com/index.html">
<img src="code25_files/9.gif" alt="Php Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.visualbasic.happycodings.com/index.html">
<img src="code25_files/10.gif" alt="Visual Basic Sample Source Codes, Code Examples" border="0"></a>
</nobr><br><br>

<div class="stylebody">

<div class="stylebodyrow">

<div class="styleleft">

<script type="text/javascript"><!--
google_ad_client = "pub-5832108353566940";
/* 160x90, happy1 oluþturulma 08.08.2008 */
google_ad_slot = "0224930125";
google_ad_width = 160;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript" src="code25_files/show_ads.js">
</script><script src="code25_files/expansion_embed.js"></script><script src="code25_files/test_domain.js"></script><script>google_protectAndRun("ads_core.google_render_ad", google_handleError, google_render_ad);</script><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: inline-table; height: 90px; position: relative; visibility: visible; width: 160px;"><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: block; height: 90px; position: relative; visibility: visible; width: 160px;"><iframe allowtransparency="true" hspace="0" id="google_ads_frame1" marginheight="0" marginwidth="0" name="google_ads_frame" src="code25_files/ads.htm" style="left: 0pt; position: absolute; top: 0pt;" vspace="0" width="160" frameborder="0" height="90" scrolling="no"></iframe></ins></ins>

<br><br>

<div class="lefthead">

C Codes</div>

<div class="leftpart">
<a href="http://www.c.happycodings.com/Beginners_Lab_Assignments/index.html" class="style2">
Beginners</a></div>

<div class="leftpart">
<a href="http://www.c.happycodings.com/C_on_Unix/index.html" class="style2">
C on Unix</a></div>

<div class="leftpart">
<a href="http://www.c.happycodings.com/code_snippets/index.html" class="style2">
Code Snippets</a></div>

<div class="leftpart">
<a href="http://www.c.happycodings.com/Data_Structures/index.html" class="style2">
Data Structures</a></div>

<div class="leftpart">
<a href="http://www.c.happycodings.com/File_Operations/index.html" class="style2">
File Operations</a></div>

<div class="leftpart">
<a href="http://www.c.happycodings.com/Games_and_Graphics/index.html" class="style2">
Games Graphics</a></div>

<div class="leftpart">
<a href="http://www.c.happycodings.com/Gnu-Linux/index.html" class="style2">
Gnu-Linux</a></div>

<div class="leftpart">
<a href="http://www.c.happycodings.com/Hardware_Interaction_Through_C/index.html" class="style2">
Hardware</a></div>

<div class="leftpart">
<a href="http://www.c.happycodings.com/Mathematics/index.html" class="style2">
Mathematics</a></div>

<div class="leftpart">
<a href="http://www.c.happycodings.com/Miscellaneous/index.html" class="style2">
Miscellaneous</a></div>

<div class="leftpart">
<a href="http://www.c.happycodings.com/Small_Programs/index.html" class="style2">
Small Programs</a></div>

<div class="leftpart">
<a href="http://www.c.happycodings.com/Sorting_Searching/index.html" class="style2">
Sorting</a></div>

<br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br>
<br><br><br><br><br>

<script type="text/javascript"><!--
google_ad_client = "pub-5832108353566940";
/* 160x600 happy5, oluþturulma 18.01.2010 */
google_ad_slot = "7268263778";
google_ad_width = 160;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript" src="code25_files/show_ads.js">
</script><script>google_protectAndRun("ads_core.google_render_ad", google_handleError, google_render_ad);</script><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: inline-table; height: 600px; position: relative; visibility: visible; width: 160px;"><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: block; height: 600px; position: relative; visibility: visible; width: 160px;"><iframe allowtransparency="true" hspace="0" id="google_ads_frame2" marginheight="0" marginwidth="0" name="google_ads_frame" src="code25_files/ads_002.htm" style="left: 0pt; position: absolute; top: 0pt;" vspace="0" width="160" frameborder="0" height="600" scrolling="no"></iframe></ins></ins>

</div></div>

<div class="stylebodyrow">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>

<div class="stylebodyrow">

<div class="stylesearch">

<br>

<form action="http://www.google.com/cse" id="cse-search-box">
  <div>
    <input name="cx" value="partner-pub-5832108353566940:o2idnt-jbap" type="hidden">
    <input name="ie" value="ISO-8859-1" type="hidden">
    <input style="border: 1px solid rgb(126, 157, 185); padding: 2px; background: rgb(255, 255, 255) url(http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif) no-repeat scroll left center; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;" name="q" size="64" type="text">
    <input name="sa" value="Search" type="submit">
  </div>
<input value="www.c.happycodings.com/Gnu-Linux/code25.html" name="siteurl" type="hidden"></form>
<script type="text/javascript" src="code25_files/brand.htm"></script>

</div>

<div class="line">&nbsp;</div>

<br>

<script type="text/javascript"><!--
google_ad_client = "pub-5832108353566940";
/* 336x280, happy2 $$$ oluþturulma 04.04.2009 */
google_ad_slot = "7931088001";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript" src="code25_files/show_ads.js">
</script><script>google_protectAndRun("ads_core.google_render_ad", google_handleError, google_render_ad);</script><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: inline-table; height: 280px; position: relative; visibility: visible; width: 336px;"><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: block; height: 280px; position: relative; visibility: visible; width: 336px;"><iframe allowtransparency="true" hspace="0" id="google_ads_frame3" marginheight="0" marginwidth="0" name="google_ads_frame" src="code25_files/ads_003.htm" style="left: 0pt; position: absolute; top: 0pt;" vspace="0" width="336" frameborder="0" height="280" scrolling="no"></iframe></ins></ins>

<br><br>

<script type="text/javascript"><!--
google_ad_client = "pub-5832108353566940";
/* 336x280, happy3 $$$ oluþturulma 04.04.2009 */
google_ad_slot = "6365147928";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript" src="code25_files/show_ads.js">
</script><script>google_protectAndRun("ads_core.google_render_ad", google_handleError, google_render_ad);</script><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: inline-table; height: 280px; position: relative; visibility: visible; width: 336px;"><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: block; height: 280px; position: relative; visibility: visible; width: 336px;"><iframe allowtransparency="true" hspace="0" id="google_ads_frame4" marginheight="0" marginwidth="0" name="google_ads_frame" src="code25_files/ads_004.htm" style="left: 0pt; position: absolute; top: 0pt;" vspace="0" width="336" frameborder="0" height="280" scrolling="no"></iframe></ins></ins>

<br><br><br>

<div class="line2">&nbsp;</div>
<h1 class="style">C &gt; Gnu-Linux sample source codes</h1>
<h2 class="style">
<img src="code25_files/list1.PNG" alt="Using pipes as file streams, fdopen()" border="0">
&nbsp;Using pipes as file streams, fdopen()</h2>

<script type="text/javascript"><!--
google_ad_client = "pub-5832108353566940";
/* 728x15, happy4 oluþturulma 08.08.2008 */
google_ad_slot = "0923901892";
google_ad_width = 728;
google_ad_height = 15;
//-->
</script>
<script type="text/javascript" src="code25_files/show_ads.js">
</script><script>google_protectAndRun("ads_core.google_render_ad", google_handleError, google_render_ad);</script><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: inline-table; height: 15px; position: relative; visibility: visible; width: 728px;"><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: block; height: 15px; position: relative; visibility: visible; width: 728px;"><iframe allowtransparency="true" hspace="0" id="google_ads_frame5" marginheight="0" marginwidth="0" name="google_ads_frame" src="code25_files/ads_005.htm" style="left: 0pt; position: absolute; top: 0pt;" vspace="0" width="728" frameborder="0" height="15" scrolling="no"></iframe></ins></ins>

<div class="line2">&nbsp;</div>
<textarea rows="58" cols="81" readonly="readonly">Using pipes as file streams, fdopen()

#include &lt;stdio.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/types.h&gt;

#define MAXLINE         512

int main(void) {
 char line[MAXLINE];
 FILE *fpin  = {0};
 FILE *fpout = {0};
 pid_t child = -1;
 int fd[2] = {0};
 int i = 0;

 pipe(fd);

 if((child = fork()) == -1) {
  perror("fork");
  return 1;
 }

 if(child == 0) {
  close(fd[0]);

  fpout = fdopen(fd[1], "w");
  if(fpout == NULL) {
   fprintf(stderr, "Error - fdopen(child)\n");
   return 1;
  }

  for(i = 0; i &lt; 10; i++)
   fprintf(fpout, "%s\n", "jeronimooo...");

  fclose(fpout);
  return 0;
 } else {
  close(fd[1]);

  fpin = fdopen(fd[0], "r");
  if(fpin == NULL) {
   fprintf(stderr, "Error - fdopen(parent)\n");
   return 1;
  }

  while(fgets(line, MAXLINE, fpin) != NULL)
   printf("%d: %s", i++, line);

  fclose(fpin);
 }

 return 0;
}
</textarea><br><br>
<div class="line2">&nbsp;</div>

<a href="http://www.happycodings.com/privacy-policy.html" class="style3">
Privacy Policy</a>
|
<a href="http://www.happycodings.com/link-to-us.html" class="style3">
Link to Us</a>
|
<a href="http://www.happycodings.com/Links/index.html" class="style3">
Links</a>

<br><br>
</div>
</div>
</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="code25_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-3063297-2");
pageTracker._initData();
pageTracker._trackPageview();
</script>

</body></html>
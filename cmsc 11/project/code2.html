<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<title>C++ sample code - Caught in the Middle - Game - Source code examples</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="Author" content="HappyCodings">
<meta name="Robots" content="index, follow">
<meta name="Description" content="Caught in the Middle - Game sample code source code examples">
<meta name="Classification" content="Computer Programming">
<meta name="Rating" content="All">
<meta name="Keywords" content="c++, c++ code, c++ code examples, c++ program code, c++ codes, c++ programming, c++ coding, visual c++,
c++ source, cpp code, arrays c++, c++ using, string c++, c++ game programming, c++ implementation, c++ data structures, c++ sample code">
<link rel="stylesheet" type="text/css" href="code2_files/style.css">
</head><body>

<div class="container">

<a href="http://www.happycodings.com/">
<img src="code2_files/happy.gif" alt="Happy Codings" border="0"></a>

<br><br><nobr>
<a href="http://www.asp.happycodings.com/index.html">
<img src="code2_files/2.gif" alt="Asp Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.aspnet.happycodings.com/index.html">
<img src="code2_files/3.gif" alt="Asp.Net Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.assembly.happycodings.com/index.html">
<img src="code2_files/4.gif" alt="Assembly Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.c.happycodings.com/index.html">
<img src="code2_files/5.gif" alt="C Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.cplusplus.happycodings.com/index.html">
<img src="code2_files/7.gif" alt="C++ Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.java.happycodings.com/index.html">
<img src="code2_files/8.gif" alt="Java Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.php.happycodings.com/index.html">
<img src="code2_files/9.gif" alt="Php Sample Source Codes, Code Examples" border="0"></a>
<a href="http://www.visualbasic.happycodings.com/index.html">
<img src="code2_files/10.gif" alt="Visual Basic Sample Source Codes, Code Examples" border="0"></a>
</nobr><br><br>

<div class="stylebody">

<div class="stylebodyrow">

<div class="styleleft">

<script type="text/javascript"><!--
google_ad_client = "pub-5832108353566940";
/* 160x90, happy1 oluþturulma 08.08.2008 */
google_ad_slot = "0224930125";
google_ad_width = 160;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript" src="code2_files/show_ads.js">
</script><script src="code2_files/expansion_embed.js"></script><script src="code2_files/test_domain.js"></script><script>google_protectAndRun("ads_core.google_render_ad", google_handleError, google_render_ad);</script><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: inline-table; height: 90px; position: relative; visibility: visible; width: 160px;"><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: block; height: 90px; position: relative; visibility: visible; width: 160px;"><iframe allowtransparency="true" hspace="0" id="google_ads_frame1" marginheight="0" marginwidth="0" name="google_ads_frame" src="code2_files/ads.htm" style="left: 0pt; position: absolute; top: 0pt;" vspace="0" width="160" frameborder="0" height="90" scrolling="no"></iframe></ins></ins>

<br><br>

<div class="lefthead">

C++ Codes</div>

<div class="leftpart">
<a href="http://www.cplusplus.happycodings.com/Algorithms/index.html" class="style2">
Algorithms</a></div>

<div class="leftpart">
<a href="http://www.cplusplus.happycodings.com/Data-Structures-and-Algorithm-Analysis-in-C++/index.html" class="style2">
Algorithm Analysis in C++</a></div>

<div class="leftpart">
<a href="http://www.cplusplus.happycodings.com/Beginners_Lab_Assignments/index.html" class="style2">
Beginners</a></div>

<div class="leftpart">
<a href="http://www.cplusplus.happycodings.com/code_snippets/index.html" class="style2">
Code Snippets</a></div>

<div class="leftpart">
<a href="http://www.cplusplus.happycodings.com/Computer_Graphics/index.html" class="style2">
Graphics</a></div>

<div class="leftpart">
<a href="http://www.cplusplus.happycodings.com/Data_Structures/index.html" class="style2">
Data Structures</a></div>

<div class="leftpart">
<a href="http://www.cplusplus.happycodings.com/File-Manipulation/index.html" class="style2">
File Manipulation</a></div>

<div class="leftpart">
<a href="http://www.cplusplus.happycodings.com/Games/index.html" class="style2">
Games</a></div>

<div class="leftpart">
<a href="http://www.cplusplus.happycodings.com/Mathematics/index.html" class="style2">
Mathematics</a></div>

<div class="leftpart">
<a href="http://www.cplusplus.happycodings.com/Miscellaneous/index.html" class="style2">
Miscellaneous</a></div>

<div class="leftpart">
<a href="http://www.cplusplus.happycodings.com/Visual-C++-5.0-Standard-C++-Library/index.html" class="style2">
Visual C++ Library</a></div>

<br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br>
<br><br><br><br><br><br>

<script type="text/javascript"><!--
google_ad_client = "pub-5832108353566940";
/* 160x600 happy5, oluþturulma 18.01.2010 */
google_ad_slot = "7268263778";
google_ad_width = 160;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript" src="code2_files/show_ads.js">
</script><script>google_protectAndRun("ads_core.google_render_ad", google_handleError, google_render_ad);</script><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: inline-table; height: 600px; position: relative; visibility: visible; width: 160px;"><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: block; height: 600px; position: relative; visibility: visible; width: 160px;"><iframe allowtransparency="true" hspace="0" id="google_ads_frame2" marginheight="0" marginwidth="0" name="google_ads_frame" src="code2_files/ads_002.htm" style="left: 0pt; position: absolute; top: 0pt;" vspace="0" width="160" frameborder="0" height="600" scrolling="no"></iframe></ins></ins>

</div></div>

<div class="stylebodyrow">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>

<div class="stylebodyrow">

<div class="stylesearch">

<br>

<form action="http://www.google.com/cse" id="cse-search-box">
  <div>
    <input name="cx" value="partner-pub-5832108353566940:o2idnt-jbap" type="hidden">
    <input name="ie" value="ISO-8859-1" type="hidden">
    <input style="border: 1px solid rgb(126, 157, 185); padding: 2px; background: rgb(255, 255, 255) url(http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif) no-repeat scroll left center; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;" name="q" size="64" type="text">
    <input name="sa" value="Search" type="submit">
  </div>
<input value="www.cplusplus.happycodings.com/Games/code2.html" name="siteurl" type="hidden"></form>
<script type="text/javascript" src="code2_files/brand.htm"></script>

</div>

<div class="line">&nbsp;</div>

<br>

<script type="text/javascript"><!--
google_ad_client = "pub-5832108353566940";
/* 336x280, happy2 $$$ oluþturulma 04.04.2009 */
google_ad_slot = "7931088001";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript" src="code2_files/show_ads.js">
</script><script>google_protectAndRun("ads_core.google_render_ad", google_handleError, google_render_ad);</script><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: inline-table; height: 280px; position: relative; visibility: visible; width: 336px;"><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: block; height: 280px; position: relative; visibility: visible; width: 336px;"><iframe allowtransparency="true" hspace="0" id="google_ads_frame3" marginheight="0" marginwidth="0" name="google_ads_frame" src="code2_files/ads_003.htm" style="left: 0pt; position: absolute; top: 0pt;" vspace="0" width="336" frameborder="0" height="280" scrolling="no"></iframe></ins></ins>

<br><br>

<script type="text/javascript"><!--
google_ad_client = "pub-5832108353566940";
/* 336x280, happy3 $$$ oluþturulma 04.04.2009 */
google_ad_slot = "6365147928";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript" src="code2_files/show_ads.js">
</script><script>google_protectAndRun("ads_core.google_render_ad", google_handleError, google_render_ad);</script><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: inline-table; height: 280px; position: relative; visibility: visible; width: 336px;"><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: block; height: 280px; position: relative; visibility: visible; width: 336px;"><iframe allowtransparency="true" hspace="0" id="google_ads_frame4" marginheight="0" marginwidth="0" name="google_ads_frame" src="code2_files/ads_004.htm" style="left: 0pt; position: absolute; top: 0pt;" vspace="0" width="336" frameborder="0" height="280" scrolling="no"></iframe></ins></ins>

<br><br><br>

<div class="line2">&nbsp;</div>
<h1 class="style">C++ &gt; Games sample source codes</h1>
<h2 class="style">
<img src="code2_files/list1.PNG" alt="Caught in the Middle - Game" border="0">
&nbsp;Caught in the Middle - Game</h2>

<script type="text/javascript"><!--
google_ad_client = "pub-5832108353566940";
/* 728x15, happy4 oluþturulma 08.08.2008 */
google_ad_slot = "0923901892";
google_ad_width = 728;
google_ad_height = 15;
//-->
</script>
<script type="text/javascript" src="code2_files/show_ads.js">
</script><script>google_protectAndRun("ads_core.google_render_ad", google_handleError, google_render_ad);</script><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: inline-table; height: 15px; position: relative; visibility: visible; width: 728px;"><ins style="border: medium none ; margin: 0pt; padding: 0pt; display: block; height: 15px; position: relative; visibility: visible; width: 728px;"><iframe allowtransparency="true" hspace="0" id="google_ads_frame5" marginheight="0" marginwidth="0" name="google_ads_frame" src="code2_files/ads_005.htm" style="left: 0pt; position: absolute; top: 0pt;" vspace="0" width="728" frameborder="0" height="15" scrolling="no"></iframe></ins></ins>

<div class="line2">&nbsp;</div>
<textarea rows="515" cols="81" readonly="readonly">Caught in the Middle - Game

#include&lt;iostream.h&gt;
#include&lt;conio.h&gt;
#include&lt;graphics.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;dos.h&gt;
#include&lt;stdio.h&gt;

enum dir direction;  
/*indicates the direction of the shooter*/
int fire(int xco,int yco,int &amp;lr,int &amp;tb,int &amp;rl,int &amp;bt);
/*shoots place check for hit*/
/*The most complex function flashes the green boxes and*/
/*records their coordinates*/
int environment(int xposition,int yposition,int position_array_location);
int match(void);                  
/*checks the fired location and the locations of the boxes*/
int put_banner(void);              
/*banner at the end of game*/
/*structure to record the position of boxes*/
//void refresh();
struct position
{
	int x_pos;
	int y_pos;
};
struct position p[10];
/*array to record the locations of boxes*/
struct position sh;
/*variable to record the location of the shooter*/
enum dir{EAST,WEST,SOUTH,NORTH};
/*enum to indicate direction*/
unsigned int hitcount=0;
void main()
{
int gdriver = DETECT;
int gmode;
int ch,is_hit;
int x=350,y=200;/*x,y coordinates*/
/*variables used to move around boxes*/
int i=0,j=320,k=400,l=0,m=800,n=200,p=600,o=300;
int iflag,lflag,mflag,pflag;
/*flag to indicate which box has been hit*/
initgraph(&amp;gdriver,&amp;gmode,"c:\tc\bgi");
/*initiating graphics*/
setcolor(YELLOW);
settextstyle(TRIPLEX_FONT,HORIZ_DIR,5);
/*Drawing the initial banners*/
outtextxy((getmaxx()/2)-260,(getmaxy()/2)-20,""CAUGHT IN THE MIDDLE"");
setcolor(WHITE);
outtextxy(100,50,"Use "arrow" key to move");
outtextxy(100,100,"Use "enter" to fire");
/*drawing banner completed*/
getch();
settextstyle(DEFAULT_FONT,HORIZ_DIR,0);
setbkcolor(BLUE);
delay(1000);
cleardevice();
x=getmaxx()/2;y=getmaxy()/2;
moveto(x,y);
do
{
/*draws the shooter*/
setfillstyle(SOLID_FILL,WHITE);
circle(x,y,10);
floodfill(x,y,WHITE);
circle(x,y,20);
line(x,y-20,x,y+20);
line(x-20,y,x+20,y);
/*draws the shooter*/
//refresh();
iflag=0,lflag=0,mflag=0,pflag=0;
while(!kbhit())
/*until the keyboard is hit boxes are flashed*/
{
	i=i%800;
	l=l%600;
	if(m&lt;=0)m+=800;
	if(p&lt;=0)p+=600;
	environment(i,j,0);
	/*moves from left to right*/
	environment(k,l,1);
	/*moves from top to bottom*/
	environment(m,n,2);
	/*moves from right to left*/
	environment(o,p,3);
	/*moves from bottom to top*/
	i+=20;
	l+=20;
	m-=20;
	p-=20;
	if(i&gt;=800) j=rand()%600;
	if(l&gt;=600) k=rand()%800;
	if(m&lt;=0) n=rand()%600;
	if(p&lt;=0) o=rand()%800;
}
ch =getch();                
/*gets key from user*/
/*key board is hit*/
setfillstyle(SOLID_FILL,BLUE);
/*draws a block to erase shooter at previous position*/
bar(x+20,y+20,x-20,y-20);
x=getx();
y=gety();
sh.x_pos=x;                    
/*gets the shooter position*/
sh.y_pos=y;
setfillstyle(SOLID_FILL,WHITE);
/*draws the shooter*/
circle(x,y,10);
floodfill(x,y,WHITE);
circle(x,y,20);
line(x,y-20,x,y+20);
line(x-20,y,x+20,y);
setfillstyle(SOLID_FILL,BLUE);
bar(x+20,y+20,x-20,y-20);
outtextxy(240,10,"HIT CTRL+Z TO QUIT");
switch(ch)
{
	case 72:/*up arrow*/
	direction=NORTH;
	x=getx();
	y=gety();
	moveto(x,y-20);
	x=getx();
	y=gety();
	sh.x_pos=x;
	sh.y_pos=y;
	setfillstyle(SOLID_FILL,WHITE);
	circle(x,y,10);
	floodfill(x,y,WHITE);
	circle(x,y,20);
	line(x,y-20,x,y+20);
	line(x-20,y,x+20,y);
	break;
	case 80:/*down arrow*/
	direction=SOUTH;
	x=getx();
	y=gety();
	moveto(x,y+20);
	x=getx();
	y=gety();
	sh.x_pos=x;
	sh.y_pos=y;
	setfillstyle(SOLID_FILL,WHITE);
	circle(x,y,10);
	floodfill(x,y,WHITE);
	circle(x,y,20);
	line(x,y-20,x,y+20);
	line(x-20,y,x+20,y);
	break;
	case 75:/*left arrow*/
	direction=WEST;
	x=getx();
	y=gety();
	moveto(x-20,y);
	x=getx();
	y=gety();
	sh.x_pos=x;
	sh.y_pos=y;
	setfillstyle(SOLID_FILL,WHITE);
	circle(x,y,10);
	floodfill(x,y,WHITE);
	circle(x,y,20);
	line(x,y-20,x,y+20);
	line(x-20,y,x+20,y);
	break;
	case 77:/*right arrow*/
	direction=EAST;
	x=getx();
	y=gety();
	moveto(x+20,y);
	x=getx();
	y=gety();
	sh.x_pos=x;
	sh.y_pos=y;
	setfillstyle(SOLID_FILL,WHITE);
	circle(x,y,10);
	floodfill(x,y,WHITE);
	circle(x,y,20);
	line(x,y-20,x,y+20);
	line(x-20,y,x+20,y);
	break;
	case 13:/*enter key*/
	x=getx();
	y=gety();
	sh.x_pos=x;
	sh.y_pos=y;
	is_hit=fire(x,y,iflag,lflag,mflag,pflag);
	/*flags r passed by reference*/
	if(is_hit==1)
	{
		hitcount++;
		if(iflag)i+=800;
		else if(lflag)k+=600;
		else if(mflag)m=0;
		else if(pflag)p=0;
		iflag=0;lflag=0;mflag=0;pflag=0; /*flag reset*/
	}
	x=getx();
	y=gety();
	setfillstyle(SOLID_FILL,WHITE);
	circle(x,y,10);
	floodfill(x,y,WHITE);
	circle(x,y,20);
	line(x,y-20,x,y+20);
	line(x-20,y,x+20,y);
	break;
}
}while(ch!=26);
closegraph();
restorecrtmode();
gotoxy(30,12);
textcolor(YELLOW);
cprintf("YOU HAVE SCORED :%d",hitcount);/*score is indicated*/
getch();
}

/*function fire draws ans erases a line along the current direction*/
int fire(int x,int y,int &lt;r,int &amp;ttb,int &amp;rtl,int &amp;btt)
{
int i=0,hit=0;
switch(direction)
{
case EAST:/*right*/

	
if(sh.y_pos&gt;=p[i].y_pos-20&amp;&amp;sh.y_pos&lt;=p[i].y_pos+20&amp;&amp;sh.x_pos&lt;p[i].x_pos)
	{
	hit=1;
	switch(i)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
	else
if(sh.y_pos&gt;=p[i+1].y_pos-20&amp;&amp;sh.y_pos&lt;=p[i+1].y_pos+20&amp;&amp;sh.x_pos&lt;p[i+1].x_pos)
	{
	hit=1;
	switch(i+1)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
	else
if(sh.y_pos&gt;=p[i+2].y_pos-20&amp;&amp;sh.y_pos&lt;=p[i+2].y_pos+20&amp;&amp;sh.x_pos&lt;p[i+2].x_pos)
	{
	hit=1;
	switch(i+2)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
	else
if(sh.y_pos&gt;=p[i+3].y_pos-20&amp;&amp;sh.y_pos&lt;=p[i+3].y_pos+20&amp;&amp;sh.x_pos&lt;p[i+3].x_pos)
	{
	hit=1;
	switch(i+3)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
setcolor(YELLOW);
line(x+20,y,x+800,y);
setcolor(BLUE);
delay(100);
line(x+20,y,x+800,y);
setcolor(WHITE);
break;
case WEST:/*left*/
	
if(sh.y_pos&gt;=p[i].y_pos-20&amp;&amp;sh.y_pos&lt;=p[i].y_pos+20&amp;&amp;sh.x_pos&gt;p[i].x_pos)
	{
	hit=1;
	switch(i)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
	else
if(sh.y_pos&gt;=p[i+1].y_pos-20&amp;&amp;sh.y_pos&lt;=p[i+1].y_pos+20&amp;&amp;sh.x_pos&gt;p[i+1].x_pos)
	{
	hit=1;
	switch(i+1)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
	else
if(sh.y_pos&gt;=p[i+2].y_pos-20&amp;&amp;sh.y_pos&lt;=p[i+2].y_pos+20&amp;&amp;sh.x_pos&gt;p[i+2].x_pos)
	{
	hit=1;
	switch(i+2)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
	else
if(sh.y_pos&gt;=p[i+3].y_pos-20&amp;&amp;sh.y_pos&lt;=p[i+3].y_pos+20&amp;&amp;sh.x_pos&gt;p[i+3].x_pos)
	{
	hit=1;
	switch(i+3)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
setcolor(YELLOW);
line(x-20,y,x-800,y);
setcolor(BLUE);
delay(100);
line(x-20,y,x-800,y);
setcolor(WHITE);
break;
case SOUTH:/*down*/

	
if(sh.x_pos&gt;=p[i].x_pos-20&amp;&amp;sh.x_pos&lt;=p[i].x_pos+20&amp;&amp;sh.y_pos&lt;p[i].y_pos)
	{
	hit=1;
	switch(i)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
	else
if(sh.x_pos&gt;=p[i+1].x_pos-20&amp;&amp;sh.x_pos&lt;=p[i+1].x_pos+20&amp;&amp;sh.y_pos&lt;p[i+1].y_pos)
	{
	hit=1;
	switch(i+1)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
	else
if(sh.x_pos&gt;=p[i+2].x_pos-20&amp;&amp;sh.x_pos&lt;=p[i+2].x_pos+20&amp;&amp;sh.y_pos&lt;p[i+2].y_pos)
	{
	hit=1;
	switch(i+2)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
	else
if(sh.x_pos&gt;=p[i+3].x_pos-20&amp;&amp;sh.x_pos&lt;=p[i+3].x_pos+20&amp;&amp;sh.y_pos&lt;p[i+3].y_pos)
	{
	hit=1;
	switch(i+3)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
setcolor(YELLOW);
line(x,y+20,x,y+800);
setcolor(BLUE);
delay(100);
line(x,y+20,x,y+800);
setcolor(WHITE);
break;
case NORTH:/*up*/
	
if(sh.x_pos&gt;=p[i].x_pos-20&amp;&amp;sh.x_pos&lt;=p[i].x_pos+20&amp;&amp;sh.y_pos&gt;p[i].y_pos)
	{
	hit=1;
	switch(i)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
	else
if(sh.x_pos&gt;=p[i+1].x_pos-20&amp;&amp;sh.x_pos&lt;=p[i+1].x_pos+20&amp;&amp;sh.y_pos&gt;p[i+1].y_pos)
	{
	hit=1;
	switch(i+1)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
	else
if(sh.x_pos&gt;=p[i+2].x_pos-20&amp;&amp;sh.x_pos&lt;=p[i+2].x_pos+20&amp;&amp;sh.y_pos&gt;p[i+2].y_pos)
	{
	hit=1;
	switch(i+2)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
	else
if(sh.x_pos&gt;=p[i+3].x_pos-20&amp;&amp;sh.x_pos&lt;=p[i+3].x_pos+20&amp;&amp;sh.y_pos&gt;p[i+3].y_pos)
	{
	hit=1;
	switch(i+3)
	{
		case 0: ltr=1; break;
		case 1: ttb=1; break;
		case 2: rtl=1; break;
		case 3: btt=1; break;
	}
	}
setcolor(YELLOW);
line(x,y-20,x,y-800);
setcolor(BLUE);
delay(100);
line(x,y-20,x,y-800);
setcolor(WHITE);
break;
}
for(i=0;i&lt;=3;i++)
{
  p[i].x_pos=0;
  p[i].y_pos=0;
}
/*refreshing the record*/
return(hit);
/*	of a positions*/
}

/*draws the green boxes */
int environment(int x,int y,int pos)
{
int i;
p[pos].x_pos=x;
p[pos].y_pos=y;
/*conditions to check for collision
checks whether the center of box x,y is within the area
(sh_xpos-20,sh_ypos-20)
(sh_xpos+20,sh_ypos+20)*/
if(x&gt;=sh.x_pos-20&amp;&amp;x&lt;=sh.x_pos+20&amp;&amp;y&gt;=sh.y_pos-20&amp;&amp;y&lt;=sh.y_pos+20)
{
	put_banner();
	getch();
	closegraph();
	restorecrtmode();
	gotoxy(30,12);
	textcolor(YELLOW);
	cprintf("YOU HAVE SCORED :%d",hitcount);
	getch();
	exit(0);
}
setfillstyle(SOLID_FILL,LIGHTGREEN);
bar(x-10,y-10,x+10,y+10);
delay(20);
setfillstyle(SOLID_FILL,BLUE);
bar(x-10,y-10,x+10,y+10);
setcolor(WHITE);
return(0);
}

/*puts a banner at the End of Game*/
int put_banner()
{
setcolor(YELLOW);
settextstyle(TRIPLEX_FONT,HORIZ_DIR,5);
outtextxy((getmaxx()/2)-260,(getmaxy()/2)-20,"SORRY YOU`VE BEEN HIT");
return 0;
}

void refresh(void)
{
int i;
for(i=0;i&lt;4;i++)
{
	p[i].x_pos=0;
	p[i].y_pos=0;
}
}
</textarea><br><br>
<div class="line2">&nbsp;</div>

<a href="http://www.happycodings.com/privacy-policy.html" class="style3">
Privacy Policy</a>
|
<a href="http://www.happycodings.com/link-to-us.html" class="style3">
Link to Us</a>
|
<a href="http://www.happycodings.com/Links/index.html" class="style3">
Links</a>

<br><br>
</div>
</div>
</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="code2_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-3063297-2");
pageTracker._initData();
pageTracker._trackPageview();
</script>

</body></html>